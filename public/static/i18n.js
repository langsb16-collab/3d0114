// i18n translations
const translations = {
  ko: {
    'nav.home': '홈',
    'nav.about': '회사소개',
    'nav.portfolio': '포트폴리오',
    'nav.services': '서비스',
    'nav.technology': '기술스택',
    'nav.contact': '문의',
    'hero.title': '혁신적인 소프트웨어\n솔루션',
    'hero.subtitle': '최첨단 기술로 당신의 아이디어를 현실로 만듭니다',
    'hero.viewPortfolio': '포트폴리오 보기',
    'hero.contactUs': '문의하기',
    'features.title': '왜 우리를 선택해야 하나요',
    'features.fast.title': '빠른 개발',
    'features.fast.desc': '빠른 프로토타이핑과 애자일 개발 방법론으로 신속한 시장 진입',
    'features.secure.title': '안전하고 신뢰할 수 있는',
    'features.secure.desc': '엔터프라이즈급 보안과 99.9% 가동 시간 보장',
    'features.support.title': '24/7 지원',
    'features.support.desc': '연중무휴 기술 지원 및 유지보수로 안심하세요',
    'footer.copyright': '© 2026 WebApp. All rights reserved.',
    'portfolio.title': '우리의 포트폴리오',
    'portfolio.subtitle': '성공적인 프로젝트와 혁신적인 솔루션을 확인하세요',
    'portfolio.viewDetails': '상세 보기',
    'portfolio.noProjects': '현재 표시할 프로젝트가 없습니다',
    'project.backToPortfolio': '포트폴리오로 돌아가기',
    'project.description': '프로젝트 설명',
    'project.techStack': '기술 스택',
    'project.devScope': '개발 범위',
    'project.gallery': '이미지 갤러리',
    'project.videos': '프로젝트 영상',
    'project.notFound': '프로젝트를 찾을 수 없습니다',
    'admin.title': '관리자 페이지',
    'admin.createProject': '새 프로젝트 생성',
    'admin.editProject': '프로젝트 수정',
    'admin.deleteProject': '프로젝트 삭제',
    'admin.projectList': '프로젝트 목록',
    'admin.published': '공개',
    'admin.unpublished': '비공개',
    'admin.save': '저장',
    'admin.cancel': '취소',
    'admin.delete': '삭제',
    'admin.edit': '수정',
  },
  en: {
    'nav.home': 'Home',
    'nav.about': 'About Us',
    'nav.portfolio': 'Portfolio',
    'nav.services': 'Services',
    'nav.technology': 'Technology',
    'nav.contact': 'Contact',
    'hero.title': 'Innovative Software\nSolutions',
    'hero.subtitle': 'Transform your ideas into reality with cutting-edge technology',
    'hero.viewPortfolio': 'View Portfolio',
    'hero.contactUs': 'Contact Us',
    'features.title': 'Why Choose Us',
    'features.fast.title': 'Fast Development',
    'features.fast.desc': 'Rapid prototyping and agile development methodology for quick time-to-market',
    'features.secure.title': 'Secure & Reliable',
    'features.secure.desc': 'Enterprise-grade security and 99.9% uptime guarantee for your applications',
    'features.support.title': '24/7 Support',
    'features.support.desc': 'Round-the-clock technical support and maintenance for your peace of mind',
    'footer.copyright': '© 2026 WebApp. All rights reserved.',
    'portfolio.title': 'Our Portfolio',
    'portfolio.subtitle': 'Explore our successful projects and innovative solutions',
    'portfolio.viewDetails': 'View Details',
    'portfolio.noProjects': 'No projects available',
    'project.backToPortfolio': 'Back to Portfolio',
    'project.description': 'Project Description',
    'project.techStack': 'Technology Stack',
    'project.devScope': 'Development Scope',
    'project.gallery': 'Image Gallery',
    'project.videos': 'Project Videos',
    'project.notFound': 'Project not found',
    'admin.title': 'Admin Panel',
    'admin.createProject': 'Create New Project',
    'admin.editProject': 'Edit Project',
    'admin.deleteProject': 'Delete Project',
    'admin.projectList': 'Project List',
    'admin.published': 'Published',
    'admin.unpublished': 'Unpublished',
    'admin.save': 'Save',
    'admin.cancel': 'Cancel',
    'admin.delete': 'Delete',
    'admin.edit': 'Edit',
  },
  zh: {
    'nav.home': '首页',
    'nav.about': '关于我们',
    'nav.portfolio': '作品集',
    'nav.services': '服务',
    'nav.technology': '技术栈',
    'nav.contact': '联系我们',
    'hero.title': '创新的软件\n解决方案',
    'hero.subtitle': '用尖端技术将您的想法变为现实',
    'hero.viewPortfolio': '查看作品集',
    'hero.contactUs': '联系我们',
    'features.title': '为什么选择我们',
    'features.fast.title': '快速开发',
    'features.fast.desc': '快速原型设计和敏捷开发方法，实现快速上市',
    'features.secure.title': '安全可靠',
    'features.secure.desc': '企业级安全性和99.9%的正常运行时间保证',
    'features.support.title': '24/7支持',
    'features.support.desc': '全天候技术支持和维护，让您安心',
    'footer.copyright': '© 2026 WebApp. 保留所有权利。',
    'portfolio.title': '我们的作品集',
    'portfolio.subtitle': '探索我们成功的项目和创新解决方案',
    'portfolio.viewDetails': '查看详情',
    'portfolio.noProjects': '暂无项目',
    'project.backToPortfolio': '返回作品集',
    'project.description': '项目描述',
    'project.techStack': '技术栈',
    'project.devScope': '开发范围',
    'project.gallery': '图片库',
    'project.videos': '项目视频',
    'project.notFound': '未找到项目',
    'admin.title': '管理面板',
    'admin.createProject': '创建新项目',
    'admin.editProject': '编辑项目',
    'admin.deleteProject': '删除项目',
    'admin.projectList': '项目列表',
    'admin.published': '已发布',
    'admin.unpublished': '未发布',
    'admin.save': '保存',
    'admin.cancel': '取消',
    'admin.delete': '删除',
    'admin.edit': '编辑',
  }
};

// Get current language from cookie or default to 'ko'
function getCurrentLanguage() {
  const cookies = document.cookie.split(';').reduce((acc, cookie) => {
    const [key, value] = cookie.trim().split('=');
    acc[key] = value;
    return acc;
  }, {});
  return cookies.lang || 'ko';
}

// Set language
function setLanguage(lang) {
  document.cookie = `lang=${lang}; path=/; max-age=31536000`;
  updatePageTranslations();
  updateLanguageButtons();
}

// Update all translations on the page
function updatePageTranslations() {
  const lang = getCurrentLanguage();
  const elements = document.querySelectorAll('[data-i18n]');
  
  elements.forEach(element => {
    const key = element.getAttribute('data-i18n');
    const translation = translations[lang][key];
    
    if (translation) {
      // Handle multiline text
      if (translation.includes('\n')) {
        element.innerHTML = translation.split('\n').join('<br>');
      } else {
        element.textContent = translation;
      }
    }
  });
}

// Update language button states
function updateLanguageButtons() {
  const lang = getCurrentLanguage();
  const buttons = document.querySelectorAll('.lang-btn');
  
  buttons.forEach(button => {
    if (button.getAttribute('data-lang') === lang) {
      button.classList.add('active');
    } else {
      button.classList.remove('active');
    }
  });
}

// Initialize language switcher
function initLanguageSwitcher() {
  const buttons = document.querySelectorAll('.lang-btn');
  
  buttons.forEach(button => {
    button.addEventListener('click', () => {
      const lang = button.getAttribute('data-lang');
      setLanguage(lang);
      
      // Reload page content if needed
      if (typeof loadContent === 'function') {
        loadContent();
      }
    });
  });
  
  updateLanguageButtons();
  updatePageTranslations();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', initLanguageSwitcher);

// Export for use in other scripts
window.i18n = {
  getCurrentLanguage,
  setLanguage,
  updatePageTranslations,
  translations
};
